#include<iostream>
using namespace std;
int n, m, ans;
int map[501][501];
int tetromino[][4][2] = {{{0,0}, {0,1}, {0,2}, {0,3}}, //
                        {{0,0}, {1, 0}, {2, 0}, {3,0}}, 
                        {{0, 0}, {1, 0}, {0, 1}, {1, 1}}, //
                        {{0, 0}, {1, 0}, {2, 0}, {2, 1}},
                        {{0, 1}, {1, 1}, {2, 1}, {2, 0}},
                        {{0, 0}, {0, 1}, {1, 1}, {2, 1}},
                        {{0, 0}, {0, 1}, {1, 0}, {2, 0}},
                        {{1, 0}, {1, 1}, {1, 2}, {0, 2}},
                        {{0, 0}, {1, 0}, {1, 1}, {1, 2}},
                        {{0, 0}, {1, 0}, {0, 1}, {0, 2}},
                        {{0, 0}, {0, 1}, {0, 2}, {1, 2}},
                        {{0, 0}, {0, 1}, {0, 2}, {1, 1}}, //
                        {{1, 0}, {0, 1}, {1, 1}, {2, 1}},
                        {{0, 0}, {1, 0}, {2, 0}, {1, 1}},
                        {{1, 0}, {1, 1}, {0, 1}, {1, 2}},
                        {{0, 0}, {1, 0}, {1, 1}, {2, 1}}, //
                        {{1, 0}, {1, 1}, {0, 1}, {0, 2}},
                        {{0, 1}, {1, 1}, {1, 0}, {2, 0}},
                        {{0, 0}, {0, 1}, {1, 1}, {1, 2}}};

void solve(){
    for(int t = 0; t < 19; ++t){

        for(int i = 0; i < n; ++i){
            for(int j = 0; j < m; ++j){
                bool flag = false;
                int tmp = 0;
                for(int k = 0; k < 4; ++k){
                    int x = tetromino[t][k][0], y = tetromino[t][k][1];
                    if(i+x < 0 || j+y < 0 || i+x >= n || j+y >= m){
                        flag = true;
                        break;
                    }
                    tmp += map[i+x][j+y];
                }
                if(!flag){
                    ans = max(ans, tmp);
                }
            }
        }
    }
}

int main(void){
    scanf("%d %d", &n, &m);
    for(int i = 0; i < n; ++i){
        for(int j = 0; j < m; ++j){
            scanf("%d", &map[i][j]);
        }
    }
    solve();
    printf("%d\n", ans);
}